{"ast":null,"code":"import _classCallCheck from \"/Users/pakchu/Desktop/React-Term-3/react/frontend-backend/client/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/pakchu/Desktop/React-Term-3/react/frontend-backend/client/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/Users/pakchu/Desktop/React-Term-3/react/frontend-backend/client/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/pakchu/Desktop/React-Term-3/react/frontend-backend/client/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/Users/pakchu/Desktop/React-Term-3/react/frontend-backend/client/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/Users/pakchu/Desktop/React-Term-3/react/frontend-backend/client/src/App.js\";\nimport React, { Component } from 'react';\nimport uuidv4 from 'uuid/v4';\nimport axios from 'axios';\nimport jwt_decode from 'jwt-decode';\nimport './App.css';\nimport Nav from './Components/Nav';\nimport Task from './Components/Task';\nimport Input from './Components/Input';\n\nvar App =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(App, _Component);\n\n  function App(props) {\n    var _this;\n\n    _classCallCheck(this, App);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(App).call(this, props));\n\n    _this.handleChecked = function (id) {\n      var updatedTasks = _this.state.tasks.map(function (todo) {\n        if (todo.id === id) {\n          todo.completed = !todo.completed;\n        }\n\n        return todo;\n      });\n\n      _this.setState({\n        task: updatedTasks\n      });\n    };\n\n    _this.handleAddTask = function (task) {\n      var newTask = {\n        todo: task,\n        completed: false,\n        id: uuidv4()\n      };\n      var currentTaskObj = Object.assign([], _this.state.tasks);\n      currentTaskObj.push(newTask);\n\n      _this.setState({\n        tasks: currentTaskObj\n      });\n    };\n\n    _this.handleUpdateEdit = function (id, updatedTask) {\n      var updated = Object.assign([], _this.state.tasks);\n      updated.map(function (task) {\n        return task.id === id ? task.todo = updatedTask : task;\n      });\n\n      _this.setState({\n        tasks: updated\n      });\n    };\n\n    _this.handleDelete = function (id) {\n      var updated = Object.assign([], _this.state.tasks);\n      var updatedList = updated.filter(function (task) {\n        return task.id !== id;\n      });\n\n      _this.setState({\n        tasks: updatedList\n      });\n    };\n\n    _this.handleSignUpAndSignIn = function (data) {\n      var axiosConfig = {\n        headers: {\n          'Content-Type': 'application/json;charset=UTF-8',\n          \"Access-Control-Allow-Origin\": \"*\"\n        }\n      };\n      axios.post('http://localhost:3001/users/register-login', data, axiosConfig).then(function (result) {\n        var token = result.data.token;\n        axios.defaults.headers.common['Authorization'] = token; // Set token to ls\n\n        localStorage.setItem('jwtToken', token); // Set token to Auth header\n        // Decode token to get user data\n\n        var decoded = jwt_decode(token);\n\n        _this.setState({\n          user: decoded.email\n        });\n      }).catch(function (err) {\n        console.log(err);\n      });\n    };\n\n    _this.logout = function () {\n      delete axios.defaults.headers.common['Authorization'];\n      localStorage.removeItem('jwtToken');\n\n      _this.setState({\n        user: null\n      });\n    };\n\n    _this.state = {\n      tasks: [{\n        todo: \"Take Crash Out\",\n        completed: false,\n        id: uuidv4()\n      }, {\n        todo: \"buy milk\",\n        completed: false,\n        id: uuidv4()\n      }, {\n        todo: \"make food\",\n        completed: false,\n        id: uuidv4()\n      }],\n      user: null\n    };\n    return _this;\n  }\n\n  _createClass(App, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      var token = localStorage.getItem('jwtToken');\n\n      if (token) {\n        var currentTime = Date.now() / 1000;\n        var decoded = jwt_decode(token);\n\n        if (decoded.exp < currentTime) {\n          localStorage.removeItem('jwtToken');\n          this.setState({\n            user: null\n          });\n        }\n\n        axios.defaults.headers.common['Authorization'] = token;\n        this.setState({\n          user: decoded.email\n        });\n        console.log('---');\n        axios.get('http://localhost:3001/users/current').then(function (result) {\n          console.log(result);\n        }).catch(function (err) {\n          console.log(err);\n        });\n      }\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      return React.createElement(\"div\", {\n        className: \"App\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 172\n        },\n        __self: this\n      }, React.createElement(Nav, {\n        handleSignUpAndSignIn: this.handleSignUpAndSignIn,\n        user: this.state.user,\n        logout: this.logout,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 173\n        },\n        __self: this\n      }), React.createElement(Input, {\n        handleAddTask: this.handleAddTask,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 178\n        },\n        __self: this\n      }), React.createElement(Task, Object.assign({}, this.state, {\n        handleChecked: this.handleChecked,\n        handleUpdateEdit: this.handleUpdateEdit,\n        handleDelete: this.handleDelete,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 179\n        },\n        __self: this\n      })));\n    }\n  }]);\n\n  return App;\n}(Component);\n\nexport default App;","map":{"version":3,"sources":["/Users/pakchu/Desktop/React-Term-3/react/frontend-backend/client/src/App.js"],"names":["React","Component","uuidv4","axios","jwt_decode","Nav","Task","Input","App","props","handleChecked","id","updatedTasks","state","tasks","map","todo","completed","setState","task","handleAddTask","newTask","currentTaskObj","Object","assign","push","handleUpdateEdit","updatedTask","updated","handleDelete","updatedList","filter","handleSignUpAndSignIn","data","axiosConfig","headers","post","then","result","token","defaults","common","localStorage","setItem","decoded","user","email","catch","err","console","log","logout","removeItem","getItem","currentTime","Date","now","exp","get"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport uuidv4 from 'uuid/v4';\nimport axios from 'axios';\nimport jwt_decode from 'jwt-decode';\n\nimport './App.css';\n\nimport Nav from './Components/Nav';\nimport Task from './Components/Task';\nimport Input from './Components/Input';\n\nclass App extends Component {\n\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      tasks: [\n        {\n          todo: \"Take Crash Out\",\n          completed: false,\n          id: uuidv4()\n        },\n        {\n          todo: \"buy milk\",\n          completed: false,\n          id: uuidv4()\n        },\n        {\n          todo: \"make food\",\n          completed: false,\n          id: uuidv4()\n        },\n      ],\n      user: null\n    }\n\n  } \n\n  componentDidMount() {\n\n    var token = localStorage.getItem('jwtToken');\n\n\n    if (token) {\n\n      const currentTime = Date.now() / 1000;\n      const decoded = jwt_decode(token);\n\n      if (decoded.exp < currentTime) {\n        localStorage.removeItem('jwtToken');\n        this.setState({\n          user: null\n        })\n      }\n      axios.defaults.headers.common['Authorization'] = token;\n\n      this.setState({\n        user: decoded.email\n      })\n      console.log('---')\n      axios.get('http://localhost:3001/users/current')\n        .then(result => {\n          console.log(result)\n        })\n        .catch(err => {\n          console.log(err)\n        })\n\n    }\n\n  }\n\n\n  handleChecked = (id) => {\n\n    let updatedTasks = this.state.tasks.map( (todo) => {\n      if (todo.id === id) {\n        todo.completed = !todo.completed      \n      }\n      return todo;\n    })\n    this.setState({\n      task: updatedTasks\n    })\n  }\n\n  handleAddTask = (task) => {\n   \n    let newTask = {\n      todo: task,\n      completed: false,\n      id: uuidv4()\n    }\n\n    let currentTaskObj = Object.assign([], this.state.tasks);\n    currentTaskObj.push(newTask);\n    this.setState({\n      tasks: currentTaskObj\n    })\n\n  }\n\n  handleUpdateEdit = (id, updatedTask) => {\n    let updated = Object.assign([], this.state.tasks);\n\n    updated.map((task) =>\n      (task.id === id ? task.todo = updatedTask : task) \n    );\n    \n    this.setState({\n      tasks: updated\n    })\n\n  }\n\n  handleDelete = (id) => {\n    let updated = Object.assign([], this.state.tasks);\n \n    let updatedList = updated.filter((task) => \n      task.id !== id  \n    );\n\n   this.setState({\n     tasks: updatedList\n   })\n\n  }\n\n  handleSignUpAndSignIn = (data) => {\n\n    let axiosConfig = {\n      headers: {\n          'Content-Type': 'application/json;charset=UTF-8',\n          \"Access-Control-Allow-Origin\": \"*\",\n      }\n    };\n\n    axios.post('http://localhost:3001/users/register-login', data, axiosConfig)\n      .then(result => {\n\n\n        const { token } = result.data;\n        axios.defaults.headers.common['Authorization'] = token;\n        // Set token to ls\n        localStorage.setItem('jwtToken', token);\n        // Set token to Auth header\n\n        // Decode token to get user data\n        const decoded = jwt_decode(token);\n\n        this.setState({\n          user: decoded.email\n        })\n\n      })\n      .catch(err => {\n        console.log(err)\n      })\n  }\n\n  logout = () => {\n    delete axios.defaults.headers.common['Authorization'];\n    localStorage.removeItem('jwtToken');\n    this.setState({\n      user: null\n    })\n  }\n\n  render() {\n    return (\n      <div className=\"App\">\n        <Nav \n          handleSignUpAndSignIn={this.handleSignUpAndSignIn} \n          user={this.state.user}\n          logout={this.logout}\n          />\n        <Input handleAddTask={this.handleAddTask} />\n        <Task {...this.state} \n              handleChecked={this.handleChecked} \n              handleUpdateEdit={this.handleUpdateEdit}  \n              handleDelete={this.handleDelete}\n              />\n      </div>\n    );\n  }\n}\n\nexport default App;\n"]},"metadata":{},"sourceType":"module"}
{"ast":null,"code":"import _classCallCheck from \"/Users/pakchu/Desktop/React-Term-3/react/frontend-backend/client/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/pakchu/Desktop/React-Term-3/react/frontend-backend/client/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/Users/pakchu/Desktop/React-Term-3/react/frontend-backend/client/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/pakchu/Desktop/React-Term-3/react/frontend-backend/client/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/Users/pakchu/Desktop/React-Term-3/react/frontend-backend/client/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/Users/pakchu/Desktop/React-Term-3/react/frontend-backend/client/src/App.js\";\nimport React, { Component } from 'react';\nimport axios from 'axios';\nimport jwt_decode from 'jwt-decode';\nimport './App.css';\nimport Nav from './Components/Nav';\nimport Task from './Components/Task';\nimport Input from './Components/Input';\n\nvar App =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(App, _Component);\n\n  function App(props) {\n    var _this;\n\n    _classCallCheck(this, App);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(App).call(this, props));\n\n    _this.handleChecked = function (id) {\n      var updatedTasks = _this.state.tasks.map(function (todo) {\n        if (todo.id === id) {\n          todo.completed = !todo.completed;\n        }\n\n        return todo;\n      });\n\n      _this.setState({\n        task: updatedTasks\n      });\n    };\n\n    _this.handleAddTask = function (task) {\n      var token = localStorage.getItem('jwtToken');\n      var decoded = jwt_decode(token);\n      var newTask = {\n        todo: task,\n        completed: false,\n        id: decoded.id\n      };\n      var axiosConfig = {\n        headers: {\n          'Content-Type': 'application/json;charset=UTF-8',\n          \"Access-Control-Allow-Origin\": \"*\"\n        }\n      };\n      axios.post('http://localhost:3001/todo/createtodo', newTask, axiosConfig).then(function (result) {\n        console.log(result.data);\n        var currentTaskObj = Object.assign([], _this.state.tasks);\n        currentTaskObj.push(result.data);\n\n        _this.setState({\n          tasks: currentTaskObj\n        });\n      }).catch(function (error) {\n        console.log(error);\n      });\n    };\n\n    _this.handleUpdateEdit = function (id, updatedTask) {\n      var updated = Object.assign([], _this.state.tasks);\n      updated.map(function (task) {\n        return task.id === id ? task.todo = updatedTask : task;\n      });\n\n      _this.setState({\n        tasks: updated\n      });\n    };\n\n    _this.handleDelete = function (id) {\n      var updated = Object.assign([], _this.state.tasks);\n      var updatedList = updated.filter(function (task) {\n        return task._id !== id;\n      });\n      var token = localStorage.getItem('jwtToken');\n      var decoded = jwt_decode(token);\n      axios.delete(\"http://localhost:3001/todo/getalltodos/\".concat(decoded.id, \"?todoid=\").concat(id, \"_method=DELETE\")).then(function (user) {\n        console.log(user);\n      }).catch(function (err) {\n        console.log(err);\n      });\n\n      _this.setState({\n        tasks: updatedList\n      });\n    };\n\n    _this.handleGetData = function () {\n      var token = localStorage.getItem('jwtToken');\n      var decoded = jwt_decode(token);\n      axios.get(\"http://localhost:3001/todo/getalltodos/\".concat(decoded.id)).then(function (result) {\n        _this.setState({\n          tasks: result.data.todos\n        });\n      }).catch(function (err) {\n        console.log(err);\n      });\n    };\n\n    _this.handleSignUpAndSignIn = function (data) {\n      var axiosConfig = {\n        headers: {\n          'Content-Type': 'application/json;charset=UTF-8',\n          \"Access-Control-Allow-Origin\": \"*\"\n        }\n      };\n      axios.post('http://localhost:3001/users/register-login', data, axiosConfig).then(function (result) {\n        var token = result.data.token;\n        axios.defaults.headers.common['Authorization'] = token; // Set token to ls\n\n        localStorage.setItem('jwtToken', token); // Set token to Auth header\n        // Decode token to get user data\n\n        var decoded = jwt_decode(token);\n\n        _this.setState({\n          user: decoded.email\n        }, function () {\n          _this.handleGetData();\n        });\n      }).catch(function (err) {\n        console.log(err);\n      });\n    };\n\n    _this.logout = function () {\n      delete axios.defaults.headers.common['Authorization'];\n      localStorage.removeItem('jwtToken');\n\n      _this.setState({\n        user: null\n      });\n    };\n\n    _this.state = {\n      tasks: [],\n      user: null\n    };\n    return _this;\n  }\n\n  _createClass(App, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      var _this2 = this;\n\n      var token = localStorage.getItem('jwtToken');\n\n      if (token) {\n        var currentTime = Date.now() / 1000;\n        var decoded = jwt_decode(token);\n\n        if (decoded.exp < currentTime) {\n          localStorage.removeItem('jwtToken');\n          this.setState({\n            user: null\n          });\n        }\n\n        axios.defaults.headers.common['Authorization'] = token;\n        this.setState({\n          user: decoded.email\n        }, function () {\n          _this2.handleGetData();\n        });\n      }\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      return React.createElement(\"div\", {\n        className: \"App\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 192\n        },\n        __self: this\n      }, React.createElement(Nav, {\n        handleSignUpAndSignIn: this.handleSignUpAndSignIn,\n        user: this.state.user,\n        logout: this.logout,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 193\n        },\n        __self: this\n      }), React.createElement(Input, {\n        handleAddTask: this.handleAddTask,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 198\n        },\n        __self: this\n      }), React.createElement(Task, Object.assign({}, this.state, {\n        handleChecked: this.handleChecked,\n        handleUpdateEdit: this.handleUpdateEdit,\n        handleDelete: this.handleDelete,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 199\n        },\n        __self: this\n      })));\n    }\n  }]);\n\n  return App;\n}(Component);\n\nexport default App;","map":{"version":3,"sources":["/Users/pakchu/Desktop/React-Term-3/react/frontend-backend/client/src/App.js"],"names":["React","Component","axios","jwt_decode","Nav","Task","Input","App","props","handleChecked","id","updatedTasks","state","tasks","map","todo","completed","setState","task","handleAddTask","token","localStorage","getItem","decoded","newTask","axiosConfig","headers","post","then","result","console","log","data","currentTaskObj","Object","assign","push","catch","error","handleUpdateEdit","updatedTask","updated","handleDelete","updatedList","filter","_id","delete","user","err","handleGetData","get","todos","handleSignUpAndSignIn","defaults","common","setItem","email","logout","removeItem","currentTime","Date","now","exp"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport axios from 'axios';\nimport jwt_decode from 'jwt-decode';\n\nimport './App.css';\n\nimport Nav from './Components/Nav';\nimport Task from './Components/Task';\nimport Input from './Components/Input';\n\nclass App extends Component {\n\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      tasks: [],\n      user: null\n    }\n\n  } \n\n  componentDidMount() {\n\n    var token = localStorage.getItem('jwtToken');\n\n    if (token) {\n\n      const currentTime = Date.now() / 1000;\n      const decoded = jwt_decode(token);\n\n      if (decoded.exp < currentTime) {\n        localStorage.removeItem('jwtToken');\n        this.setState({\n          user: null\n        })\n      }\n      axios.defaults.headers.common['Authorization'] = token;\n\n      this.setState({\n        user: decoded.email\n      }, () => {\n        this.handleGetData()\n      })\n    }\n\n  }\n\n\n  handleChecked = (id) => {\n\n    let updatedTasks = this.state.tasks.map( (todo) => {\n      if (todo.id === id) {\n        todo.completed = !todo.completed      \n      }\n      return todo;\n    })\n    this.setState({\n      task: updatedTasks\n    })\n  }\n\n  handleAddTask = (task) => {\n    var token = localStorage.getItem('jwtToken');\n    const decoded = jwt_decode(token);\n    let newTask = {\n      todo: task,\n      completed: false,\n      id: decoded.id\n    }\n\n    let axiosConfig = {\n      headers: {\n          'Content-Type': 'application/json;charset=UTF-8',\n          \"Access-Control-Allow-Origin\": \"*\",\n      }\n    };\n\n    axios.post('http://localhost:3001/todo/createtodo', newTask, axiosConfig)\n      .then(result => {\n        console.log(result.data)\n        let currentTaskObj = Object.assign([], this.state.tasks);\n        currentTaskObj.push(result.data);\n        this.setState({\n          tasks: currentTaskObj\n        })\n      })\n      .catch(error => {\n        console.log(error)\n      })\n\n  }\n\n  handleUpdateEdit = (id, updatedTask) => {\n    let updated = Object.assign([], this.state.tasks);\n\n    updated.map((task) =>\n      (task.id === id ? task.todo = updatedTask : task) \n    );\n    \n    this.setState({\n      tasks: updated\n    })\n\n  }\n\n  handleDelete = (id) => {\n    let updated = Object.assign([], this.state.tasks);\n \n    let updatedList = updated.filter((task) => \n      task._id !== id  \n    );\n\n    var token = localStorage.getItem('jwtToken');\n    const decoded = jwt_decode(token);\n\n    axios.delete(`http://localhost:3001/todo/getalltodos/${decoded.id}?todoid=${id}_method=DELETE`)\n      .then(user => {\n        console.log(user)\n      })\n      .catch(err => {\n        console.log(err)\n      })\n\n\n   this.setState({\n     tasks: updatedList\n   })\n\n  }\n\n  handleGetData = () => {\n\n    var token = localStorage.getItem('jwtToken');\n    const decoded = jwt_decode(token);\n\n    axios.get(`http://localhost:3001/todo/getalltodos/${decoded.id}`)\n    .then(result => {\n      this.setState({\n        tasks: result.data.todos\n      })\n    })\n    .catch(err => {\n      console.log(err)\n    })\n  }\n\n  handleSignUpAndSignIn = (data) => {\n\n    let axiosConfig = {\n      headers: {\n          'Content-Type': 'application/json;charset=UTF-8',\n          \"Access-Control-Allow-Origin\": \"*\",\n      }\n    };\n\n    axios.post('http://localhost:3001/users/register-login', data, axiosConfig)\n      .then(result => {\n\n\n        const { token } = result.data;\n        axios.defaults.headers.common['Authorization'] = token;\n        // Set token to ls\n        localStorage.setItem('jwtToken', token);\n        // Set token to Auth header\n\n        // Decode token to get user data\n        const decoded = jwt_decode(token);\n\n        this.setState({\n          user: decoded.email\n        }, () => {\n          this.handleGetData()\n        })\n\n      })\n      .catch(err => {\n        console.log(err)\n      })\n  }\n\n  logout = () => {\n    delete axios.defaults.headers.common['Authorization'];\n    localStorage.removeItem('jwtToken');\n    this.setState({\n      user: null\n    })\n  }\n\n  render() {\n    return (\n      <div className=\"App\">\n        <Nav \n          handleSignUpAndSignIn={this.handleSignUpAndSignIn} \n          user={this.state.user}\n          logout={this.logout}\n          />\n        <Input handleAddTask={this.handleAddTask} />\n        <Task {...this.state} \n              handleChecked={this.handleChecked} \n              handleUpdateEdit={this.handleUpdateEdit}  \n              handleDelete={this.handleDelete}\n              />\n      </div>\n    );\n  }\n}\n\nexport default App;\n"]},"metadata":{},"sourceType":"module"}